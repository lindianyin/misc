<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LibU: Buffer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Intro</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Buffer</h1><hr/><a name="_details"></a><h2>Overview</h2>
<p>The <a class="el" href="group__buf.html">Buffer</a> module can be thought as the dual of the <a class="el" href="group__string.html">String</a> module for generic data buffers. The exposed primitives provide hooks for the typical life-cycle of a data buffer: ex-nihil creation or loading from external source, manipulation, possible data printing, raw data extraction and/or dump to non-volatile storage, and disposal. </p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3caf623cdac2dda0f17f3d4086c79a11"></a><!-- doxytag: member="buf::u_buf_t" ref="ga3caf623cdac2dda0f17f3d4086c79a11" args="" -->
typedef struct u_buf_s&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The basic buffer type. Internally it hides the data buffer which can be accessed via <a class="el" href="group__buf.html#ga00f0a98f557b2c4fb42e2f73b5722066" title="Return the pointer to the internal data block.">u_buf_ptr</a>, and related size indicators (both total <a class="el" href="group__alloc.html#gab61921b41f57b91c825ef811200e8577" title="Wrapper for malloc-like function.">u_malloc</a>'d buffer size, and the number of actually used bytes) which are accessed via <a class="el" href="group__buf.html#gad08c514dfcb94f5a6661c848b23fdefe" title="Return the total size of the data block allocated by the buffer.">u_buf_size</a> and <a class="el" href="group__buf.html#ga9669dec13ecd194d472e85f2cf7828f7" title="Return the number of used bytes in the supplied buffer.">u_buf_len</a> respectively. <br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga501453a6972b803dc1b6aee5bbaef2be">u_buf_append</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, const void *data, size_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append data to the buffer.  <a href="#ga501453a6972b803dc1b6aee5bbaef2be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga127f2540b4a23d06b5b36da537fdc3bb">u_buf_clear</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear a buffer.  <a href="#ga127f2540b4a23d06b5b36da537fdc3bb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga3fe4ec3d0e04629f4177efb5aa43233c">u_buf_create</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> **pubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new buffer.  <a href="#ga3fe4ec3d0e04629f4177efb5aa43233c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga41205cb892debc42a36fb7fd54256ae1">u_buf_detach</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Give up ownership of the <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> data block.  <a href="#ga41205cb892debc42a36fb7fd54256ae1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga9cbad104b02a300588a4fedb77d8746d">u_buf_free</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a buffer.  <a href="#ga9cbad104b02a300588a4fedb77d8746d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga605fc42679dfea4b7231408d6d14e351">u_buf_load</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, const char *filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fill a buffer object with the content of a file.  <a href="#ga605fc42679dfea4b7231408d6d14e351"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#gac5382645184c7054885617e65321b852">u_buf_printf</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, const char *fmt,...)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append a string to the given buffer.  <a href="#gac5382645184c7054885617e65321b852"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga280dd0228033fb8d8ef60051ac211367">u_buf_reserve</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, size_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enlarge the memory allocated to a given buffer.  <a href="#ga280dd0228033fb8d8ef60051ac211367"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga11b25989e45ded40d397f7596f4d0168">u_buf_save</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, const char *filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save buffer to file.  <a href="#ga11b25989e45ded40d397f7596f4d0168"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga638ecb7c989ab2081949d62d6220ce97">u_buf_set</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, const void *data, size_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the value of a buffer.  <a href="#ga638ecb7c989ab2081949d62d6220ce97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga9669dec13ecd194d472e85f2cf7828f7">u_buf_len</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of used bytes in the supplied buffer.  <a href="#ga9669dec13ecd194d472e85f2cf7828f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#gad08c514dfcb94f5a6661c848b23fdefe">u_buf_size</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the total size of the data block allocated by the buffer.  <a href="#gad08c514dfcb94f5a6661c848b23fdefe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#ga00f0a98f557b2c4fb42e2f73b5722066">u_buf_ptr</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the pointer to the internal data block.  <a href="#ga00f0a98f557b2c4fb42e2f73b5722066"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buf.html#gaab387f86a4663244fa4f61f981609b74">u_buf_shrink</a> (<a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *ubuf, size_t newlen)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes bytes from the tail of the buffer.  <a href="#gaab387f86a4663244fa4f61f981609b74"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga501453a6972b803dc1b6aee5bbaef2be"></a><!-- doxytag: member="buf.h::u_buf_append" ref="ga501453a6972b803dc1b6aee5bbaef2be" args="(u_buf_t *ubuf, const void *data, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_append </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Append <code>size</code> bytes of <code>data</code> to the given buffer. If needed the buffer will be transparently enlarged.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>an already allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>a reference to the data block that will be appended </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the number of bytes to append</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00077">77</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="buf_8c_source.html#l00041">u_buf_reserve()</a>.</p>

<p>Referenced by <a class="el" href="buf_8c_source.html#l00257">u_buf_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ga127f2540b4a23d06b5b36da537fdc3bb"></a><!-- doxytag: member="buf.h::u_buf_clear" ref="ga127f2540b4a23d06b5b36da537fdc3bb" args="(u_buf_t *ubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset the internal <code>used</code> bytes indicator. Note that the memory allocated by the buffer object won't be <a class="el" href="group__alloc.html#ga8a480341289bf5fc1a72e7974c4a739d" title="Wrapper for free-like function, sanity checks the supplied pointer.">u_free</a>'d until <a class="el" href="group__buf.html#ga9cbad104b02a300588a4fedb77d8746d" title="Free a buffer.">u_buf_free</a> is called.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on failure (i.e. <code>NULL</code> <code>ubuf</code> supplied) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00233">233</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>Referenced by <a class="el" href="buf_8c_source.html#l00111">u_buf_load()</a>, and <a class="el" href="buf_8c_source.html#l00257">u_buf_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3fe4ec3d0e04629f4177efb5aa43233c"></a><!-- doxytag: member="buf.h::u_buf_create" ref="ga3fe4ec3d0e04629f4177efb5aa43233c" args="(u_buf_t **pubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> **&nbsp;</td>
          <td class="paramname"> <em>pubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a new <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object and save its reference to <code>*ps</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pubuf</em>&nbsp;</td><td>result argument: on success it will get the new <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00402">402</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="memory_8c_source.html#l00073">u_zalloc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga41205cb892debc42a36fb7fd54256ae1"></a><!-- doxytag: member="buf.h::u_buf_detach" ref="ga41205cb892debc42a36fb7fd54256ae1" args="(u_buf_t *ubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Give up ownership of the data block of the supplied <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object <code>ubuf</code>. Note that <a class="el" href="group__alloc.html#ga8a480341289bf5fc1a72e7974c4a739d" title="Wrapper for free-like function, sanity checks the supplied pointer.">u_free</a> won't be called on it, so the caller must <a class="el" href="group__alloc.html#ga8a480341289bf5fc1a72e7974c4a739d" title="Wrapper for free-like function, sanity checks the supplied pointer.">u_free</a> the buffer later on. Before calling <a class="el" href="group__buf.html#ga41205cb892debc42a36fb7fd54256ae1" title="Give up ownership of the u_buf_t data block.">u_buf_detach</a>, use <a class="el" href="group__buf.html#ga00f0a98f557b2c4fb42e2f73b5722066" title="Return the pointer to the internal data block.">u_buf_ptr</a> to get the pointer of the data block, and possibly <a class="el" href="group__buf.html#gad08c514dfcb94f5a6661c848b23fdefe" title="Return the total size of the data block allocated by the buffer.">u_buf_size</a> and <a class="el" href="group__buf.html#ga9669dec13ecd194d472e85f2cf7828f7" title="Return the number of used bytes in the supplied buffer.">u_buf_len</a> to get its total size and actually used length.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on failure (i.e. <code>NULL</code> <code>ubuf</code> supplied) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00174">174</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9cbad104b02a300588a4fedb77d8746d"></a><!-- doxytag: member="buf.h::u_buf_free" ref="ga9cbad104b02a300588a4fedb77d8746d" args="(u_buf_t *ubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release all resources and free the given buffer object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>buffer object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00324">324</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="memory_8c_source.html#l00085">u_free()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9669dec13ecd194d472e85f2cf7828f7"></a><!-- doxytag: member="buf.h::u_buf_len" ref="ga9669dec13ecd194d472e85f2cf7828f7" args="(u_buf_t *ubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t u_buf_len </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of bytes actually used in the supplied <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object <code>ubuf</code> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of <code>used</code> bytes or <code>-1</code> if the <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> reference is invalid </dd></dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00215">215</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>Referenced by <a class="el" href="buf_8c_source.html#l00152">u_buf_save()</a>.</p>

</div>
</div>
<a class="anchor" id="ga605fc42679dfea4b7231408d6d14e351"></a><!-- doxytag: member="buf.h::u_buf_load" ref="ga605fc42679dfea4b7231408d6d14e351" args="(u_buf_t *ubuf, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Open <code>filename</code> and copy its whole content into the given buffer <code>ubuf</code> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>an already allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>path of the source file</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00111">111</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="buf_8c_source.html#l00233">u_buf_clear()</a>, and <a class="el" href="buf_8c_source.html#l00041">u_buf_reserve()</a>.</p>

</div>
</div>
<a class="anchor" id="gac5382645184c7054885617e65321b852"></a><!-- doxytag: member="buf.h::u_buf_printf" ref="gac5382645184c7054885617e65321b852" args="(u_buf_t *ubuf, const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_printf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a NUL-terminated string from the <code>printf(3)</code> like arguments and append it to the given <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object. The length of the appended string (NOT including the ending <code>\0</code>) will be added to the current length of the buffer (<a class="el" href="group__buf.html#ga9669dec13ecd194d472e85f2cf7828f7" title="Return the number of used bytes in the supplied buffer.">u_buf_len</a>).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>printf(3) format string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>variable list of arguments used by the <code>fmt</code> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00349">349</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="buf_8c_source.html#l00041">u_buf_reserve()</a>.</p>

</div>
</div>
<a class="anchor" id="ga00f0a98f557b2c4fb42e2f73b5722066"></a><!-- doxytag: member="buf.h::u_buf_ptr" ref="ga00f0a98f557b2c4fb42e2f73b5722066" args="(u_buf_t *ubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * u_buf_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a generic pointer to the data block allocated by the <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object <code>ubuf</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated buffer object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the pointer to the internal data block of <code>NULL</code> if an invalid <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> reference is supplied </dd></dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00282">282</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>Referenced by <a class="el" href="buf_8c_source.html#l00152">u_buf_save()</a>.</p>

</div>
</div>
<a class="anchor" id="ga280dd0228033fb8d8ef60051ac211367"></a><!-- doxytag: member="buf.h::u_buf_reserve" ref="ga280dd0228033fb8d8ef60051ac211367" args="(u_buf_t *ubuf, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_reserve </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enlarge the buffer data block to (at least) <code>size</code> bytes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>an already allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the requested size in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00041">41</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="memory_8c_source.html#l00079">u_realloc()</a>.</p>

<p>Referenced by <a class="el" href="buf_8c_source.html#l00077">u_buf_append()</a>, <a class="el" href="buf_8c_source.html#l00111">u_buf_load()</a>, and <a class="el" href="buf_8c_source.html#l00349">u_buf_printf()</a>.</p>

</div>
</div>
<a class="anchor" id="ga11b25989e45ded40d397f7596f4d0168"></a><!-- doxytag: member="buf.h::u_buf_save" ref="ga11b25989e45ded40d397f7596f4d0168" args="(u_buf_t *ubuf, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Save the <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object <code>ubuf</code> to <code>filename</code> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>an already allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>path of the destination file</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00152">152</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="buf_8c_source.html#l00215">u_buf_len()</a>, <a class="el" href="buf_8c_source.html#l00282">u_buf_ptr()</a>, and <a class="el" href="srcs_2toolbox_2misc_8c_source.html#l00500">u_data_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="ga638ecb7c989ab2081949d62d6220ce97"></a><!-- doxytag: member="buf.h::u_buf_set" ref="ga638ecb7c989ab2081949d62d6220ce97" args="(u_buf_t *ubuf, const void *data, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Explicitly set the value of <em>ubuf</em> to <em>data</em>. If needed the buffer object will call <a class="el" href="group__buf.html#ga501453a6972b803dc1b6aee5bbaef2be" title="Append data to the buffer.">u_buf_append</a> to enlarge the storage needed to copy-in the <em>data</em> value.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>a reference to the memory block that will be copied into the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>size of <em>data</em> in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00257">257</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

<p>References <a class="el" href="buf_8c_source.html#l00077">u_buf_append()</a>, and <a class="el" href="buf_8c_source.html#l00233">u_buf_clear()</a>.</p>

</div>
</div>
<a class="anchor" id="gaab387f86a4663244fa4f61f981609b74"></a><!-- doxytag: member="buf.h::u_buf_shrink" ref="gaab387f86a4663244fa4f61f981609b74" args="(u_buf_t *ubuf, size_t newlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int u_buf_shrink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>newlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the new length of the buffer; <code>newlen</code> must be less or equal to the current buffer length.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated buffer object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newlen</em>&nbsp;</td><td>new length of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>~0</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00302">302</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad08c514dfcb94f5a6661c848b23fdefe"></a><!-- doxytag: member="buf.h::u_buf_size" ref="gad08c514dfcb94f5a6661c848b23fdefe" args="(u_buf_t *ubuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t u_buf_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11">u_buf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ubuf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the total size of data block allocated by the supplied <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object <code>ubuf</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ubuf</em>&nbsp;</td><td>a previously allocated <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the length in bytes of the data block (which could even be <code>0</code> in case <code>ubuf</code> is detached), or <code>-1</code> if a <code>NULL</code> <a class="el" href="group__buf.html#ga3caf623cdac2dda0f17f3d4086c79a11" title="The basic buffer type. Internally it hides the data buffer which can be accessed...">u_buf_t</a> reference was supplied. </dd></dl>

<p>Definition at line <a class="el" href="buf_8c_source.html#l00197">197</a> of file <a class="el" href="buf_8c_source.html">buf.c</a>.</p>

</div>
</div>
</div>
<hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2012 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
