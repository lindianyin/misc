<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LibU: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Intro</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="install">Installation </a></h1><h2><a class="anchor" id="makl">
MaKL is a Prerequisite</a></h2>
<p>LibU needs <a href="http://koanlogic.com/makl">MaKL</a> to configure and build.</p>
<p>The following commands should be sufficient to get MaKL installed on any Linux flavour or Darwin/MacOSX: </p>
<div class="fragment"><pre class="fragment">
$ wget http://koanlogic.com/download/makl/makl-1.8.1.tar.gz
$ tar zxf makl-1.8.1.tar.gz &amp;&amp; cd makl-1.8.1
$ sh configure.sh
$ su 
Password: ****
# make install
</pre></div><p> Should your platform be one of Solaris, OpenSolaris, FreeBSD, PC-BSD, OpenBSD, NetBSD, DragonflyBSD or Windows (MinGW or Gygwin) take a look at the <code>INSTALL</code> file in the top-level MaKL sources directory to track down specific variations on the theme.</p>
<h2><a class="anchor" id="download">
Download</a></h2>
<p>Once MaKL is there, you can start downloading the package (always check the official <a href="http://koanlogic.com/libu/index.html">LibU</a> page for the latest version and related ChangeLog) and tailor it to your specific needs: </p>
<div class="fragment"><pre class="fragment">
$ wget http://koanlogic.com/download/libu/libu-2.0.0.tar.gz
$ tar zxf libu-2.0.0.tar.gz &amp;&amp; cd libu-2.0.0
</pre></div><h2><a class="anchor" id="configure">
Configure</a></h2>
<p>E.g. should you need to change the default installation path (which is <code>/usr/local</code>), use: </p>
<div class="fragment"><pre class="fragment">
$ makl-conf --prefix="/my/install/base/dir"
</pre></div><p>Debug symbols and warnings from the compiler can be switched on via <code>--enable_debug</code> and <code>--enable_warns</code> (use <code>--enable_icc_warns</code> instead when working with the Intel C compiler): </p>
<div class="fragment"><pre class="fragment">
$ makl-conf --enable_debug --enable_warns
</pre></div><p>Code profiling using gprof(1) can be activated via <code>--enable_profile</code>, and in general any compiler flag can be passed to the build stage in the following way: </p>
<div class="fragment"><pre class="fragment">
$ makl-conf --extra-cflags="-Wformat -Wno-format-extra-args -Wformat-security -Wformat-nonliteral -Wformat=2"
</pre></div><p> The <code>--extra-xxx="val"</code> is indeed a powerful mechanism by which any Makefile variable <code>XXX</code> (uppercase!) can be given an additional value <code>val:</code> (ab)use it to tweak <code>LDFLAGS</code>, <code>SHLIB_LDFLAGS</code>, etc. as needed. Anyway if in doubt, or in search for exotic features, type <code>"makl-conf -h"</code> to display the complete list of options: it's likely that what you are trying to achieve is already there.</p>
<p>By default LibU is compiled as static library, to also enable shared library build, supply the <code>--enable_shared</code> flag.</p>
<h3><a class="anchor" id="modules">
Pick Up What Needs to be Included</a></h3>
<p>The default is to build all the modules, but you can disable the inclusion of specific bits selectively using the following switches:</p>
<ul>
<li><code>--no_hmap</code>: to disable the <a class="el" href="group__hmap.html">HMap</a> module</li>
<li><code>--no_config</code>: to disable the <a class="el" href="group__config.html">Configuration</a> module</li>
<li><code>--no_net</code>: to disable the <a class="el" href="group__net.html">Networking</a> module</li>
<li><code>--no_env</code>: to disable the <a class="el" href="group__env.html">Environment</a> module</li>
<li><code>--no_fs</code>: to disable the <a class="el" href="group__fs.html">File system</a> module</li>
<li><code>--no_pwd</code>: to disable the <a class="el" href="group__pwd.html">Password</a> module</li>
<li><code>--no_list</code>: to disable the <a class="el" href="group__list.html">Lists</a> module</li>
<li><code>--no_array</code>: to disable the <a class="el" href="group__array.html">Dynamic Arrays</a> module</li>
<li><code>--no_ringbuffer</code>: to disable the <a class="el" href="group__rb.html">Ring Buffer</a> module</li>
<li><code>--no_pqueue</code>: to disable the <a class="el" href="group__pq.html">Priority Queues</a> module</li>
<li><code>--no_json</code>: to disable the <a class="el" href="group__json.html">JSON</a> module</li>
<li><code>--no_bst</code>: to disable the <a class="el" href="group__bst.html">Binary Search Tree</a> module</li>
</ul>
<p>Also, some specific features regarding the networking code can be disabled at configuration:</p>
<ul>
<li><code>--no_ipv6</code>: to disable IPv6 protocol support</li>
<li><code>--no_sctp</code>: to disable SCTP protocol support</li>
<li><code>--no_unixsock</code>: to disable UNIX IPC support</li>
</ul>
<p>If you need to enable compatibility with (some, not all) 1.X interfaces, specify the <code>--compat_1x</code> command line switch.</p>
<h2><a class="anchor" id="build">
Building and Encoding</a></h2>
<p>When you are done with the configure step, you can build LibU bits and optionally test them: </p>
<div class="fragment"><pre class="fragment">
$ makl
$ makl -C test
</pre></div><p>And finally install it: </p>
<div class="fragment"><pre class="fragment">
$ su
Password: ****
# makl install
</pre></div><h2><a class="anchor" id="hellolibu">
Hello LibU !</a></h2>
<p>You now are ready to play with your first LibU program:</p>
<div class="fragment"><pre class="fragment">$ cat main.c
<span class="preprocessor">#include &lt;u/libu.h&gt;</span>

<span class="keywordtype">int</span> <a class="code" href="group__log.html#ga213afa2e73e0c2102f43d4067e41b90f" title="per-process facility variable.">facility</a> = LOG_LOCAL0;

<span class="keywordtype">int</span> main (<span class="keywordtype">void</span>)
{
    u_con(<span class="stringliteral">&quot;Hello LibU world !&quot;</span>);
    <span class="keywordflow">return</span> 0;
}
</pre></div><p>Write a Makefile like the following:</p>
<div class="fragment"><pre class="fragment">$ cat Makefile
include common.mk

PROG = hellolibu
SRCS = main.c

LDADD += /path/to/install/prefix/lib/libu.a
CFLAGS += -I/path/to/install/prefix/include

include prog.mk
</pre></div><p>Then type: </p>
<div class="fragment"><pre class="fragment">$ makl &amp;&amp; ./hellolibu
</pre></div><p>and enjoy ! </p>
</div>
<hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2012 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
